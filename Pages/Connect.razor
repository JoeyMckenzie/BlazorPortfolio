@using Portfolio.Services
@using Portfolio.Models 

@*
@inject SendGridService SendGridService
*@

<div class="card text-center">
    <div class="card-header">
        <h2><code>Connect</code></h2>
    </div>
    <div class="card-body">
        <div class="py-2">
            I'm always looking for exiting projects to work on in the .NET space, or anything interesting. Shoot me an email if you have any questions about web, consulting, 
            application development, or any new breweries you'd like to recommend (arguably of the most importance). Thanks for stopping by! 
        </div>
        <hr class="py-1" />
        <button class="btn btn-primary" onclick="window.open('mailto:joey.mckenzie27@gmail.com?subject=Hey Joey!&body=Let\'s grab a beer and talk all things web sometime.')">Contact Me</button>

        @*
        <EditForm EditContext="@editContext" OnValidSubmit="SendEmail">
            <DataAnnotationsValidator />

            <div class="form-group">
                <label for="your-email">Your Email Address</label>
                <input type="email" class="form-control" id="your-email" placeholder="email@address.com" @bind-value="emailDto.Email">
                <ValidationMessage For="@(() => emailDto.Email)"/>
            </div>
            <div class="form-group">
                <label for="email-subject">Subject</label>
                <input type="text" class="form-control" id="email-subject" placeholder="Let's grab a beer and talk some code!" @bind-value="emailDto.Subject">
                <ValidationMessage For="@(() => emailDto.Subject)" />
            </div>
            <div class="form-group">
                <label for="email-message">Message</label>
                <textarea class="form-control" id="email-message" rows="5" @bind="emailDto.Message"></textarea>
                <ValidationMessage For="@(() => emailDto.Message)" />
            </div>
            <div class="form-group">
                @if (string.IsNullOrWhiteSpace(emailDto.Email))
                {
                    <button disabled class="btn btn-primary">Send</button>
                }
                else
                {
                    <button @onclick="SendEmail" type="submit" class="btn btn-primary">Send</button>
                }
            </div>
        </EditForm>
        *@
    </div>
</div>

@code {

    @*
    private EmailDto emailDto = new EmailDto();
    private EditContext? editContext;

    protected override void OnInitialized()
    {
        editContext = new EditContext(emailDto);
    }

    private async Task SendEmail()
    {
        if (editContext != null && editContext.Validate())
        {
            Console.WriteLine("Sending portfolio request email...");
            await SendGridService.SendEmail(emailDto);
        }
    }
    *@
}